# 2-if-for-array

<small>最后更新于 {docsify-updated}。</small>

## 全局变量 or 局部变量

<small>updated by 张哲恺	offered by 蚂蚁蚂蚁</small>

### 问题描述

将比较大的数组和一些变量定义在main函数的外面是什么操作？

### 解决思路

检索相关资料，不妨自己试一试

### 示例代码与解读

定义在main函数外部的变量称为全局变量，顾名思义就是全局可见的变量，而定义在main函数内部的变量称为局部变量，即只在main函数内部可见。两者存储在内存的不同区域，由于存储区域的划分问题，大数组应该定义为全局变量

更具体地说：程序在运行时系统会为main函数分配一块内存空间供其正常运行，但这块内存是有限的，如果定义太大的数组在main函数内部，需要的内存超过了系统分配的内存空间，就会导致main函数无法运行，程序自动退出

但如果将大数组定义在main函数外，它就不再占用main函数的内存空间，而是占用计算机中更充裕的另一块内存空间，因而能够正常运行

```c
#include <stdio.h>
#define N 1e7+5 
#define n 1e4+5
char S[N]; //大数组应该存储为全局变量，如果存储为局部变量但是超出了存储上限会出错
//具体表现为运行程序后一段时间没有任何反应，并自动退出程序
int main(){
  char s[n]; //小数组存储为局部变量
  return 0;
}
```

下面简单地比较一下两者的优劣：

全局变量会由系统全部自动初始化为0值；但局部变量不会，其初始的值为垃圾值（可能为0）

```c
char S[N];
int main(){
  char s[n];
  printf("%s\n%s", S, s);
  //不妨自己试一试，但不要把n和N define得太大，否则会看花眼
}
```

下面一点暂时不用理解：

全局变量不用作为参数传入函数，调用时比较方便（偷懒），但无可避免地会造成函数副作用（即函数运行的结果依赖于环境），同时还会在多文件程序的编码过程中为你带来麻烦；局部变量由于仅函数内部可见，在调用另一个函数需要使用它时只能作为参数传入

### 参考资料

https://stackoverflow.com/questions/484635/are-global-variables-bad
